<%= render "shared/authenticated_layout" do %>
  <%= render Ui::BackLinkComponent.new(href: medical_folder_path(@medical_folder), text: t('.back_to_folder', folder_name: @medical_folder.name)) %>

  <div class="max-w-4xl mx-auto">
    <!-- Document Header -->
    <%= render Ui::CardComponent.new(classes: "mb-6") do %>
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
        <div class="flex items-center gap-4">
          <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-<%= @document.file_type == :pdf ? 'red' : 'blue' %>-500/20 to-<%= @document.file_type == :pdf ? 'red' : 'blue' %>-600/20 flex items-center justify-center">
            <%= render Ui::IconComponent.new(name: @document.file_type == :pdf ? :document_pdf : :image, size: :xl, color: "#{@document.file_type == :pdf ? 'red' : 'blue'}-400") %>
          </div>
          <div>
            <h1 class="text-2xl font-bold text-white"><%= @document.title %></h1>
            <p class="text-slate-400"><%= @document.formatted_date %><%= @document.file.attached? ? " â€¢ #{@document.file_size_mb} MB" : "" %></p>
          </div>
        </div>

        <div class="flex items-center gap-3">
          <% if @document.file.attached? %>
            <%= render Ui::ButtonComponent.new(
              href: rails_blob_path(@document.file, disposition: "attachment"),
              variant: :primary,
              icon: :download
            ) do %>
              <%= t('.download') %>
            <% end %>
          <% end %>

          <%= render Ui::ButtonComponent.new(
            href: edit_medical_folder_document_path(@medical_folder, @document),
            variant: :secondary,
            icon: :edit
          ) do %>
            <%= t('.edit') %>
          <% end %>

          <%= render Ui::ButtonComponent.new(
            href: medical_folder_document_path(@medical_folder, @document),
            variant: :danger,
            method: :delete,
            turbo_confirm: t('.delete_confirm'),
            icon: :trash
          ) do %>
            <%= t('.delete') %>
          <% end %>
        </div>
      </div>

      <% if @document.notes.present? %>
        <div class="mt-4 pt-4 border-t border-slate-700/50">
          <h3 class="text-sm font-medium text-slate-400 mb-2"><%= t('.notes') %></h3>
          <p class="text-white"><%= @document.notes %></p>
        </div>
      <% end %>
    <% end %>

    <!-- Document Preview -->
    <%= render Features::DocumentPreviewComponent.new(document: @document) %>
  </div>
<% end %>
