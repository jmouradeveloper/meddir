<%= render "shared/authenticated_layout" do %>
  <%= render Ui::BackLinkComponent.new(href: medical_folder_path(@medical_folder), text: "Back to #{@medical_folder.name}") %>

  <div class="max-w-4xl mx-auto">
    <!-- Document Header -->
    <%= render Features::PageHeaderComponent.new(
      title: @document.title,
      subtitle: "#{@document.formatted_date}#{@document.file.attached? ? " â€¢ #{@document.file_size_mb} MB" : ""}",
      icon: @document.file_type == :pdf ? :document_pdf : :image,
      icon_color: @document.file_type == :pdf ? "red" : "blue"
    ) do |header| %>
      <% header.with_actions do %>
        <% if @document.file.attached? %>
          <%= render Ui::ButtonComponent.new(
            href: rails_blob_path(@document.file, disposition: "attachment"),
            variant: :primary,
            icon: :download
          ) do %>
            Download
          <% end %>
        <% end %>

        <%= render Ui::ButtonComponent.new(
          href: edit_medical_folder_document_path(@medical_folder, @document),
          variant: :secondary,
          icon: :edit
        ) do %>
          Edit
        <% end %>

        <%= render Ui::ButtonComponent.new(
          href: medical_folder_document_path(@medical_folder, @document),
          variant: :danger,
          method: :delete,
          turbo_confirm: "Are you sure you want to delete this document?",
          icon: :trash
        ) do %>
          Delete
        <% end %>
      <% end %>

      <% if @document.notes.present? %>
        <h3 class="text-sm font-medium text-slate-400 mb-2">Notes</h3>
        <p class="text-white"><%= @document.notes %></p>
      <% end %>
    <% end %>

    <!-- Document Preview -->
    <%= render Features::DocumentPreviewComponent.new(document: @document) %>
  </div>
<% end %>
