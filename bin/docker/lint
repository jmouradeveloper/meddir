#!/usr/bin/env bash
# Run linting and security checks
set -e

cd "$(dirname "$0")/../.."

echo "==> Running RuboCop..."
docker compose exec web bin/rubocop "$@"

if [ "$1" != "--rubocop-only" ]; then
  echo ""
  echo "==> Running Brakeman (security)..."
  docker compose exec web bin/brakeman --no-pager

  echo ""
  echo "==> Running Bundle Audit..."
  docker compose exec web bin/bundler-audit check --update
fi

